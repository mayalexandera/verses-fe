{"ast":null,"code":"import api from \"../apis/api\";\nimport * as actionTypes from \"./actionTypes\"; // export const initPlan = () => async (dispatch, getState) => {\n//   dispatch(startFetchPlan())\n//   let user = getState().auth.userId\n//   console.log(user)\n//   await api.get(`/`)\n// }\n\nexport const userPlanStart = () => {\n  console.log('in plan start');\n  return {\n    type: actionTypes.USER_PLAN_START\n  };\n};\nexport const userPlanDelete = () => async (dispatch, getState) => {\n  let user = getState().auth.userId;\n  await api.delete(`/users/${user}/plan_membership`).then(dispatch({\n    type: actionTypes.USER_PLAN_DELETE\n  }));\n};\nexport const fetchPlans = () => async dispatch => {\n  await api.get(`/plans`).then(resp => dispatch({\n    type: actionTypes.FETCH_PLANS,\n    payload: resp.data\n  }));\n};\nexport const fetchPlansStart = () => {\n  return {\n    type: actionTypes.FETCH_PLANS_START\n  };\n};\nexport const initPlanMembership = plan_id => async (dispatch, getState) => {\n  console.log('in initPlanMembership');\n  let user = getState().auth.userId;\n  dispatch(userPlanStart());\n  const planData = {\n    member_id: user.id,\n    plan_id: plan_id\n  };\n  await api.post(`/users/${user}/plan_membership`, planData).then(response => {\n    console.log(response.data);\n    dispatch(userPlanSuccess(response.data));\n  }).catch(err => {\n    dispatch(userPlanFail(err.message));\n  });\n};\nexport const userPlanSuccess = plan_id => {\n  return {\n    type: actionTypes.USER_PLAN_SUCCESS,\n    payload: plan_id\n  };\n};\nexport const userPlanFail = error => {\n  return {\n    type: actionTypes.USER_PLAN_FAIL,\n    payload: error\n  };\n};","map":{"version":3,"sources":["/Users/mayablevins/Desktop/verses/verses_fe/src/store/actions/PlansActions.js"],"names":["api","actionTypes","userPlanStart","console","log","type","USER_PLAN_START","userPlanDelete","dispatch","getState","user","auth","userId","delete","then","USER_PLAN_DELETE","fetchPlans","get","resp","FETCH_PLANS","payload","data","fetchPlansStart","FETCH_PLANS_START","initPlanMembership","plan_id","planData","member_id","id","post","response","userPlanSuccess","catch","err","userPlanFail","message","USER_PLAN_SUCCESS","error","USER_PLAN_FAIL"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,aAAhB;AACA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B,C,CAGA;AACA;AACA;AACA;AACA;AAEA;;AACA,OAAO,MAAMC,aAAa,GAAG,MAAM;AACjCC,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACD,SAAO;AACLC,IAAAA,IAAI,EAAEJ,WAAW,CAACK;AADb,GAAP;AAGA,CALM;AAOP,OAAO,MAAMC,cAAc,GAAG,MAAM,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AAChE,MAAIC,IAAI,GAAGD,QAAQ,GAAGE,IAAX,CAAgBC,MAA3B;AACA,QAAMZ,GAAG,CAACa,MAAJ,CAAY,UAASH,IAAK,kBAA1B,EAA6CI,IAA7C,CAAkDN,QAAQ,CAAC;AAC/DH,IAAAA,IAAI,EAAEJ,WAAW,CAACc;AAD6C,GAAD,CAA1D,CAAN;AAID,CANM;AAQP,OAAO,MAAMC,UAAU,GAAG,MAAM,MAAOR,QAAP,IAAoB;AAClD,QAAMR,GAAG,CAACiB,GAAJ,CAAS,QAAT,EACLH,IADK,CACAI,IAAI,IAAIV,QAAQ,CAAC;AACrBH,IAAAA,IAAI,EAAEJ,WAAW,CAACkB,WADG;AACUC,IAAAA,OAAO,EAACF,IAAI,CAACG;AADvB,GAAD,CADhB,CAAN;AAID,CALM;AAOP,OAAO,MAAMC,eAAe,GAAG,MAAM;AACnC,SAAO;AAACjB,IAAAA,IAAI,EAAEJ,WAAW,CAACsB;AAAnB,GAAP;AACD,CAFM;AAIP,OAAO,MAAMC,kBAAkB,GAAIC,OAAD,IAAa,OAAOjB,QAAP,EAAiBC,QAAjB,KAA6B;AAC1EN,EAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,MAAIM,IAAI,GAAGD,QAAQ,GAAGE,IAAX,CAAgBC,MAA3B;AACAJ,EAAAA,QAAQ,CAACN,aAAa,EAAd,CAAR;AACA,QAAMwB,QAAQ,GAAG;AACfC,IAAAA,SAAS,EAAEjB,IAAI,CAACkB,EADD;AAEfH,IAAAA,OAAO,EAAEA;AAFM,GAAjB;AAIA,QAAMzB,GAAG,CACR6B,IADK,CACC,UAASnB,IAAK,kBADf,EACkCgB,QADlC,EAELZ,IAFK,CAEAgB,QAAQ,IAAI;AAChB3B,IAAAA,OAAO,CAACC,GAAR,CAAY0B,QAAQ,CAACT,IAArB;AACAb,IAAAA,QAAQ,CAACuB,eAAe,CAACD,QAAQ,CAACT,IAAV,CAAhB,CAAR;AACD,GALK,EAMLW,KANK,CAMCC,GAAG,IAAI;AACZzB,IAAAA,QAAQ,CAAC0B,YAAY,CAACD,GAAG,CAACE,OAAL,CAAb,CAAR;AACD,GARK,CAAN;AASA,CAjBK;AAmBP,OAAO,MAAMJ,eAAe,GAAIN,OAAD,IAAa;AAC1C,SAAO;AACNpB,IAAAA,IAAI,EAAEJ,WAAW,CAACmC,iBADZ;AAC+BhB,IAAAA,OAAO,EAAEK;AADxC,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMS,YAAY,GAAIG,KAAD,IAAW;AACrC,SAAO;AACLhC,IAAAA,IAAI,EAAEJ,WAAW,CAACqC,cADb;AAC6BlB,IAAAA,OAAO,EAAEiB;AADtC,GAAP;AAGD,CAJM","sourcesContent":["import api from \"../apis/api\";\nimport * as actionTypes from \"./actionTypes\";\n\n\n// export const initPlan = () => async (dispatch, getState) => {\n//   dispatch(startFetchPlan())\n//   let user = getState().auth.userId\n//   console.log(user)\n//   await api.get(`/`)\n\n// }\nexport const userPlanStart = () => {\n  console.log('in plan start')\n return {\n   type: actionTypes.USER_PLAN_START\n }\n}\n\nexport const userPlanDelete = () => async (dispatch, getState) => {\n  let user = getState().auth.userId\n  await api.delete(`/users/${user}/plan_membership`).then(dispatch({\n    type: actionTypes.USER_PLAN_DELETE,\n  })\n  )\n};\n\nexport const fetchPlans = () => async (dispatch) => {\n  await api.get(`/plans`)\n  .then(resp => dispatch({\n    type: actionTypes.FETCH_PLANS, payload:resp.data\n  }))\n}\n\nexport const fetchPlansStart = () => {\n  return {type: actionTypes.FETCH_PLANS_START }\n}\n\nexport const initPlanMembership = (plan_id) => async (dispatch, getState) =>{\n  console.log('in initPlanMembership')\n  let user = getState().auth.userId\n  dispatch(userPlanStart());\n  const planData = {\n    member_id: user.id,\n    plan_id: plan_id\n  }\n  await api\n  .post(`/users/${user}/plan_membership`, planData)\n  .then(response => {\n    console.log(response.data)\n    dispatch(userPlanSuccess(response.data))\n  })\n  .catch(err => {\n    dispatch(userPlanFail(err.message))\n  })\n }\n\nexport const userPlanSuccess = (plan_id) => {\n  return {\n   type: actionTypes.USER_PLAN_SUCCESS, payload: plan_id\n  }\n}\n\nexport const userPlanFail = (error) => {\n  return {\n    type: actionTypes.USER_PLAN_FAIL, payload: error\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}